{"ast":null,"code":"import _objectSpread from\"/Users/daniel/Downloads/newjwt/newjwt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/daniel/Downloads/newjwt/newjwt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{createRef}from\"react\";import{useState}from\"react\";import{useForm}from\"react-hook-form\";import axios from\"axios\";import{useStore}from'react-context-hook';import{store}from'react-context-hook';import{useNavigate}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";axios.defaults.withCredentials=true;function Login(props){var sends=useNavigate();var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),state=_useState2[0],setState=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),redirct=_useState4[0],setRedirect=_useState4[1];function Posts(url,objs){try{axios.post(url,objs,{withCredentials:true,headers:{\"Access-Control-Allow-Origin\":\"https://jwtauthfrontend.azurewebsites.net\",\"Access-Control-Allow-Credentials\":true}}).then(function(res){props.setName(res.data.name);setRedirect(true);}).catch(function(e){});}catch(err){}}//const [loginstatus,setloginstatus,deleteloginstatus] = useStore('loginstatus', false)\n//store.set('user', {name: 'piero', email: 'nappiero@spyna.it'})\n// console.log(loginstatus+\" mini\");\nvar fullName=/*#__PURE__*/createRef(null);var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch,errors=_useForm.formState.errors;var onSubmit=function onSubmit(e){e.preventDefault();//setState({...state,name:\"sss\",password:\"sssss\"})\nPosts(\"https://jwtauthfrontend.azurewebsites.net/api/auth/login\",state);};if(redirct){sends(\"/\");}return/*#__PURE__*/_jsx(_Fragment,{children:/*#__PURE__*/_jsx(\"main\",{className:\"form-signin\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"h1\",{className:\"h3 mb-3 fw-normal\",children:\"Please sign in\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"email\"},register(\"email\",{pattern:{value:\"^([a-z]){1,}@([a-z]){3,8}(\\.)([a-z]){3,5}$\",message:\"email\"}})),{},{className:\"form-control\",id:\"floatingInput\",placeholder:\"name@example.com\",onChange:function onChange(e){setState(_objectSpread(_objectSpread({},state),{},{email:e.target.value}));console.log(state);}})),/*#__PURE__*/_jsx(\"label\",{for:\"floatingInput\",children:\"Email address\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({type:\"password\"},register(\"password\",{required:true,pattern:\"^[a-zA-z]+$/i\"})),{},{className:\"form-control\",id:\"floatingPassword\",placeholder:\"Password\",onChange:function onChange(e){setState(_objectSpread(_objectSpread({},state),{},{password:e.target.value}));console.log(state);}})),/*#__PURE__*/_jsx(\"label\",{for:\"floatingPassword\",children:\"Password\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"checkbox mb-3\",children:/*#__PURE__*/_jsxs(\"label\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",value:\"remember-me\"}),\" Remember me please\"]})}),/*#__PURE__*/_jsx(\"button\",{className:\"w-100 btn btn-lg btn-primary\",type:\"submit\",onClick:onSubmit,children:\"Sign in\"}),/*#__PURE__*/_jsx(\"p\",{className:\"mt-5 mb-3 text-muted\",children:\"\\xA9 2017\\u20132021\"})]})})});}export default Login;","map":{"version":3,"sources":["/Users/daniel/Downloads/newjwt/newjwt/src/pages/Login.js"],"names":["React","createRef","useState","useForm","axios","useStore","store","useNavigate","defaults","withCredentials","Login","props","sends","email","password","state","setState","redirct","setRedirect","Posts","url","objs","post","headers","then","res","setName","data","name","catch","e","err","fullName","register","handleSubmit","watch","errors","formState","onSubmit","preventDefault","pattern","value","message","target","console","log","required"],"mappings":"uTAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,QAAT,KAAyB,OAAzB,CACA,OAAQC,OAAR,KAAsB,iBAAtB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,QAAT,KAAyB,oBAAzB,CACA,OAAQC,KAAR,KAAoB,oBAApB,CACA,OAAQC,WAAR,KAA0B,kBAA1B,C,6IACAH,KAAK,CAACI,QAAN,CAAeC,eAAf,CAA+B,IAA/B,CAOA,QAASC,CAAAA,KAAT,CAAeC,KAAf,CACA,CAEE,GAAIC,CAAAA,KAAK,CAACL,WAAW,EAArB,CAFF,cAGyBL,QAAQ,CAAC,CAACW,KAAK,CAAC,EAAP,CAAUC,QAAQ,CAAC,EAAnB,CAAD,CAHjC,wCAGSC,KAHT,eAGeC,QAHf,8BAI6Bd,QAAQ,CAAC,KAAD,CAJrC,yCAIQe,OAJR,eAIgBC,WAJhB,eASE,QAASC,CAAAA,KAAT,CAAeC,GAAf,CAAmBC,IAAnB,CACA,CACE,GAAG,CACHjB,KAAK,CAACkB,IAAN,CAAWF,GAAX,CAAeC,IAAf,CAAoB,CAClBZ,eAAe,CAAE,IADC,CAElBc,OAAO,CAAE,CACP,8BAA+B,2CADxB,CAEP,mCAAoC,IAF7B,CAFS,CAApB,EAMCC,IAND,CAMM,SAACC,GAAD,CAAO,CACXd,KAAK,CAACe,OAAN,CAAcD,GAAG,CAACE,IAAJ,CAASC,IAAvB,EACFV,WAAW,CAAC,IAAD,CAAX,CAEC,CAVD,EAWCW,KAXD,CAWO,SAACC,CAAD,CAAK,CAAE,CAXd,EAaC,CACD,MAAMC,GAAN,CAAU,CAET,CAMF,CASD;AACA;AAED;AACG,GAAMC,CAAAA,QAAQ,cAAC/B,SAAS,CAAC,IAAD,CAAxB,CA/CJ,aAgDqEE,OAAO,EAhD5E,CAgDY8B,QAhDZ,UAgDYA,QAhDZ,CAgDsBC,YAhDtB,UAgDsBA,YAhDtB,CAgDoCC,KAhDpC,UAgDoCA,KAhDpC,CAgDwDC,MAhDxD,UAgD2CC,SAhD3C,CAgDwDD,MAhDxD,CAmDE,GAAME,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACR,CAAD,CACjB,CAEEA,CAAC,CAACS,cAAF,GACA;AACApB,KAAK,CAAC,0DAAD,CAA4DJ,KAA5D,CAAL,CAED,CAPD,CASF,GAAGE,OAAH,CACA,CACEL,KAAK,CAAC,GAAD,CAAL,CACD,CAEG,mBAEA,sCACD,aAAM,SAAS,CAAC,aAAhB,uBACC,cAAM,QAAQ,CAAE0B,QAAhB,wBAEE,WAAI,SAAS,CAAC,mBAAd,4BAFF,cAIE,aAAK,SAAS,CAAC,eAAf,wBACA,0CAAQ,IAAI,CAAC,OAAb,EAAyBL,QAAQ,CAAC,OAAD,CAAS,CAACO,OAAO,CAAC,CAACC,KAAK,CAAC,4CAAP,CAAoDC,OAAO,CAAC,OAA5D,CAAT,CAAT,CAAjC,MAA0H,SAAS,CAAC,cAApI,CAAmJ,EAAE,CAAC,eAAtJ,CAAsK,WAAW,CAAC,kBAAlL,CAAqM,QAAQ,CAAE,kBAACZ,CAAD,CAAK,CAACd,QAAQ,gCAAKD,KAAL,MAAWF,KAAK,CAACiB,CAAC,CAACa,MAAF,CAASF,KAA1B,GAAR,CAA2CG,OAAO,CAACC,GAAR,CAAY9B,KAAZ,EAAoB,CAApR,GADA,cAEE,cAAO,GAAG,CAAC,eAAX,2BAFF,GAJF,cAQE,aAAK,SAAS,CAAC,eAAf,wBACA,0CAAO,IAAI,CAAC,UAAZ,EAA4BkB,QAAQ,CAAC,UAAD,CAAY,CAACa,QAAQ,CAAC,IAAV,CAAeN,OAAO,CAAC,eAAvB,CAAZ,CAApC,MAA0F,SAAS,CAAC,cAApG,CAAmH,EAAE,CAAC,kBAAtH,CAAyI,WAAW,CAAC,UAArJ,CAAkK,QAAQ,CAAE,kBAACV,CAAD,CAAK,CAACd,QAAQ,gCAAKD,KAAL,MAAWD,QAAQ,CAACgB,CAAC,CAACa,MAAF,CAASF,KAA7B,GAAR,CAA8CG,OAAO,CAACC,GAAR,CAAY9B,KAAZ,EAAoB,CAApP,GADA,cAEE,cAAO,GAAG,CAAC,kBAAX,sBAFF,GARF,cAaE,YAAK,SAAS,CAAC,eAAf,uBACE,sCACE,cAAO,IAAI,CAAC,UAAZ,CAAuB,KAAK,CAAC,aAA7B,EADF,yBADF,EAbF,cAkBE,eAAQ,SAAS,CAAC,8BAAlB,CAAiD,IAAI,CAAC,QAAtD,CAA+D,OAAO,CAAEuB,QAAxE,qBAlBF,cAmBE,UAAG,SAAS,CAAC,sBAAb,iCAnBF,GADD,EADC,EAFA,CA6BH,CAED,cAAe5B,CAAAA,KAAf","sourcesContent":["import React, { createRef } from \"react\";\nimport { useState } from \"react\";\nimport {useForm} from \"react-hook-form\";\nimport axios from \"axios\";\nimport { useStore } from 'react-context-hook'\nimport {store} from 'react-context-hook';\nimport {useNavigate} from 'react-router-dom'\naxios.defaults.withCredentials=true;\n\n\n\n\n\n\nfunction Login(props)\n{\n\n  let sends=useNavigate();\n  const [state,setState]=useState({email:\"\",password:\"\"});\n  const[redirct,setRedirect]=useState(false)\n\n\n\n\n  function Posts(url,objs)\n  {\n    try{\n    axios.post(url,objs,{\n      withCredentials: true,\n      headers: {\n        \"Access-Control-Allow-Origin\": \"https://jwtauthfrontend.azurewebsites.net\",\n        \"Access-Control-Allow-Credentials\": true\n      }})\n    .then((res)=>{\n      props.setName(res.data.name)\n    setRedirect(true)\n    \n    })\n    .catch((e)=>{});\n  \n    }\n    catch(err){\n\n    }\n  \n  \n   \n    \n    \n  }\n\n\n\n\n\n\n\n \n  //const [loginstatus,setloginstatus,deleteloginstatus] = useStore('loginstatus', false)\n  //store.set('user', {name: 'piero', email: 'nappiero@spyna.it'})\n\n // console.log(loginstatus+\" mini\");\n    const fullName=createRef(null);\n    const { register, handleSubmit, watch, formState: { errors } } = useForm();\n\n\n  const onSubmit = (e) => \n  {\n    \n    e.preventDefault();\n    //setState({...state,name:\"sss\",password:\"sssss\"})\n    Posts(\"https://jwtauthfrontend.azurewebsites.net/api/auth/login\",state);\n   \n  };\n\nif(redirct)\n{\n  sends(\"/\")\n}\n\n    return(\n    \n    <>\n   <main className=\"form-signin\">\n    <form onSubmit={onSubmit}> \n      \n      <h1 className=\"h3 mb-3 fw-normal\">Please sign in</h1>\n\n      <div className=\"form-floating\">\n      <input  type=\"email\" {...register(\"email\",{pattern:{value:\"^([a-z]){1,}@([a-z]){3,8}(\\.)([a-z]){3,5}$\",message:\"email\"}})}className=\"form-control\" id=\"floatingInput\" placeholder=\"name@example.com\" onChange={(e)=>{setState({...state,email:e.target.value}); console.log(state);}}/>\n        <label for=\"floatingInput\">Email address</label>\n      </div>\n      <div className=\"form-floating\">\n      <input type=\"password\"  {...register(\"password\",{required:true,pattern:\"^[a-zA-z]+$/i\"})} className=\"form-control\" id=\"floatingPassword\" placeholder=\"Password\"   onChange={(e)=>{setState({...state,password:e.target.value}); console.log(state);}}/>\n        <label for=\"floatingPassword\">Password</label>\n      </div>\n\n      <div className=\"checkbox mb-3\">\n        <label>\n          <input type=\"checkbox\" value=\"remember-me\"/> Remember me please\n        </label>\n      </div>\n      <button className=\"w-100 btn btn-lg btn-primary\" type=\"submit\" onClick={onSubmit}>Sign in</button>\n      <p className=\"mt-5 mb-3 text-muted\">© 2017–2021</p>\n    </form>\n  </main>\n    \n    \n    </>);\n}\n\nexport default Login;"]},"metadata":{},"sourceType":"module"}