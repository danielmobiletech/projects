{"ast":null,"code":"import _objectSpread from\"/Users/daniel/Downloads/newjwt/newjwt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/daniel/Downloads/newjwt/newjwt/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import axios from\"axios\";import{useNavigate}from\"react-router\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Home(){var sends=useNavigate();var denied=false;axios.interceptors.response.use(function(response){if(response.status===401){sends('/login');}return response;});var _useState=useState({name:'',email:''}),_useState2=_slicedToArray(_useState,2),loginstate=_useState2[0],setLoginState=_useState2[1];useEffect(function(){// async()=>\n// {\n//await \ntry{axios.get('http://localhost:8089/api/auth/user',{withCredentials:true,headers:{\"Access-Control-Allow-Origin\":\"http://localhost:8089\",\"Access-Control-Allow-Credentials\":true}}).catch(function(e){console.log(\"no worky\");denied=true;sends('/login');}).then(function(res){if(denied==false){setLoginState(_objectSpread({},res.data));}});//})()\n}catch(err){sends('/login');}});return/*#__PURE__*/_jsxs(\"div\",{children:[\"Welcome Back \",loginstate.name]});}","map":{"version":3,"sources":["/Users/daniel/Downloads/newjwt/newjwt/src/pages/Home.js"],"names":["React","useEffect","useState","axios","useNavigate","Home","sends","denied","interceptors","response","use","status","name","email","loginstate","setLoginState","get","withCredentials","headers","catch","e","console","log","then","res","data","err"],"mappings":"uTAAA,MAAOA,CAAAA,KAAP,EAAcC,SAAd,CAAwBC,QAAxB,KAAuC,OAAvC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,WAAT,KAA4B,cAA5B,C,6CACA,cAAe,SAASC,CAAAA,IAAT,EACf,CACI,GAAIC,CAAAA,KAAK,CAACF,WAAW,EAArB,CACA,GAAIG,CAAAA,MAAM,CAAC,KAAX,CACAJ,KAAK,CAACK,YAAN,CAAmBC,QAAnB,CAA4BC,GAA5B,CAAgC,SAAAD,QAAQ,CAAI,CACxC,GAAGA,QAAQ,CAACE,MAAT,GAAoB,GAAvB,CAA4B,CAACL,KAAK,CAAC,QAAD,CAAL,CAAiB,CAC9C,MAAOG,CAAAA,QAAP,CACH,CAHD,EAHJ,cAOsCP,QAAQ,CAAC,CAACU,IAAI,CAAC,EAAN,CAASC,KAAK,CAAC,EAAf,CAAD,CAP9C,wCAOWC,UAPX,eAOsBC,aAPtB,eASId,SAAS,CAAC,UAAI,CAON;AACA;AACR;AACA,GAAG,CACHE,KAAK,CAACa,GAAN,CAAU,qCAAV,CAAgD,CAChDC,eAAe,CAAE,IAD+B,CAEhDC,OAAO,CAAE,CACP,8BAA+B,uBADxB,CAEP,mCAAoC,IAF7B,CAFuC,CAAhD,EAMDC,KANC,CAMK,SAACC,CAAD,CAAK,CAACC,OAAO,CAACC,GAAR,CAAY,UAAZ,EACff,MAAM,CAAC,IAAP,CACAD,KAAK,CAAC,QAAD,CAAL,CACC,CATG,EAUHiB,IAVG,CAUE,SAACC,GAAD,CAAO,CAAC,GAAGjB,MAAM,EAAE,KAAX,CAEV,CAACQ,aAAa,kBAAKS,GAAG,CAACC,IAAT,EAAb,CAA6B,CAAC,CAZ/B,EAsBA;AAGC,CACD,MAAMC,GAAN,CAAU,CAENpB,KAAK,CAAC,QAAD,CAAL,CACH,CAEJ,CA1CY,CAAT,CA6CA,mBAEA,uCACkBQ,UAAU,CAACF,IAD7B,GAFA,CAOH","sourcesContent":["import React,{useEffect,useState} from \"react\";\nimport axios from \"axios\"\nimport { useNavigate } from \"react-router\";\nexport default function Home()\n{\n    let sends=useNavigate()\n    let denied=false;\n    axios.interceptors.response.use(response => {\n        if(response.status === 401) {sends('/login');}\n        return response;\n    });\n    const [loginstate,setLoginState]= useState({name:'',email:''});\n    \n    useEffect(()=>{\n\n\n\n        \n        \n            \n            // async()=>\n            // {\n    //await \n    try{\n    axios.get('http://localhost:8089/api/auth/user',{\n    withCredentials: true,\n    headers: {\n      \"Access-Control-Allow-Origin\": \"http://localhost:8089\",\n      \"Access-Control-Allow-Credentials\": true\n    }})\n  .catch((e)=>{console.log(\"no worky\")\ndenied=true;\nsends('/login')\n})\n.then((res)=>{if(denied==false)\n    \n    {setLoginState({...res.data})}})\n\n            \n        \n \n        \n        \n        \n        \n   \n    //})()\n\n\n    }\n    catch(err){\n\n        sends('/login')\n    }\n\n})         \n    \n\n    return( \n    \n    <div>\n        Welcome Back {loginstate.name}\n    </div> \n    \n    );\n}\n"]},"metadata":{},"sourceType":"module"}