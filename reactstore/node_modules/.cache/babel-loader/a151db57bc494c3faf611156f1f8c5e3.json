{"ast":null,"code":"import _objectSpread from\"/Users/daniel/Documents/ReactStore/reactstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/daniel/Documents/ReactStore/reactstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/daniel/Documents/ReactStore/reactstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/daniel/Documents/ReactStore/reactstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/daniel/Documents/ReactStore/reactstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/daniel/Documents/ReactStore/reactstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{storeProducts,detailProduct}from'./data';var ProductContext=React.createContext();var ProductProvider=/*#__PURE__*/function(_Component){_inherits(ProductProvider,_Component);var _super=_createSuper(ProductProvider);function ProductProvider(props){var _this;_classCallCheck(this,ProductProvider);_this=_super.call(this,props);_this.handleDetail=function(id){console.log('hello from detail');var product=_this.getItem(id);_this.setState(function(){return{detailProduct:product};});};_this.addToCart=function(id){var tempProducts=_toConsumableArray(_this.state.products);var index=tempProducts.indexOf(_this.getItem(id));var product=tempProducts[index];product.inCart=true;product.count=1;var price=product.price;product.total=price;_this.setState(function(){return{products:tempProducts,cart:[].concat(_toConsumableArray(_this.state.cart),[product])};},function(){_this.addTotals();});};_this.getItem=function(id){var product=_this.state.products.find(function(item){return item.id===id;});return product;};_this.setProducts=function(){var tempProducts=[];storeProducts.forEach(function(item){var singleItem=_objectSpread({},item);tempProducts=[].concat(_toConsumableArray(tempProducts),[singleItem]);});_this.setState(function(){return{products:tempProducts};});};_this.closeModal=function(){_this.setState(function(){return{modalOpen:false};});};_this.openModal=function(id){var product=_this.getItem(id);_this.setState(function(){return{modalProduct:product,modalOpen:true};});};_this.increment=function(id){var tempCart=_toConsumableArray(_this.state.cart);console.log(id+'this id');var selectProduct=tempCart.find(function(x){return x.id===id;});// console.log(selectProduct+\"this index\")\nvar index=tempCart.indexOf(selectProduct);var product=tempCart[index];product.count+=1;product.total=product.count*product.price;_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},function(){return _this.addTotals();});};_this.decrement=function(id){var tempCart=_toConsumableArray(_this.state.cart);var selectProduct=tempCart.find(function(x){return x.id===id;});var index=tempCart.indexOf(selectProduct);var product=tempCart[index];product.count-=1;if(product.count<=0)_this.removeItem(id);else{product.total=product.count*product.price;}_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},function(){return _this.addTotals();});};_this.removeItem=function(id){var tempProducts=_toConsumableArray(_this.state.products);var tempCart=_toConsumableArray(_this.state.cart);tempCart=tempCart.filter(function(x){return x.id!==id;});var index=tempProducts.indexOf(_this.getItem(id));var removedProduct=tempProducts[index];removedProduct.inCart=false;removedProduct.count=0;removedProduct.total=0;_this.setState(function(){return{products:_toConsumableArray(tempProducts),cart:_toConsumableArray(tempCart)};},function(){return _this.addTotals();});};_this.clearCart=function(){_this.setState(function(){return{cart:[]};},function(){_this.setProducts();_this.addTotals();});};_this.addTotals=function(){var subTotal=0;_this.state.cart.map(function(x){return subTotal+=x.total;});var tempTax=subTotal*0.1;var tax=parseFloat(tempTax.toFixed(2));var total=subTotal+tax;_this.setState(function(){return{cartSubTotal:subTotal,cartTax:tax,cartTotal:total};});//setProd({ ...prod, cartSubTotal: subTotal, cartTax: tax, cartTotal: total })\n};_this.state={products:[],detailProduct:detailProduct,cart:[],modalOpen:false,modalProduct:detailProduct,cartSubTotal:0,cartTax:0,cartTotal:0};return _this;}_createClass(ProductProvider,[{key:\"componentWillMount\",value:function componentWillMount(){this.setProducts();}},{key:\"render\",value:function render(){console.log(this.state);return/*#__PURE__*/React.createElement(ProductContext.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{handleDetail:this.handleDetail,addToCart:this.addToCart,openModal:this.openModal,closeModal:this.closeModal,increment:this.increment,decrement:this.decrement,removeItem:this.removeItem,clearCart:this.clearCart})},this.props.children);}}]);return ProductProvider;}(Component);var ProductConsumer=ProductContext.Consumer;export{ProductProvider,ProductConsumer};","map":{"version":3,"sources":["/Users/daniel/Documents/ReactStore/reactstore/src/Context.js"],"names":["React","Component","storeProducts","detailProduct","ProductContext","createContext","ProductProvider","props","handleDetail","id","console","log","product","getItem","setState","addToCart","tempProducts","state","products","index","indexOf","inCart","count","price","total","cart","addTotals","find","item","setProducts","forEach","singleItem","closeModal","modalOpen","openModal","modalProduct","increment","tempCart","selectProduct","x","decrement","removeItem","filter","removedProduct","clearCart","subTotal","map","tempTax","tax","parseFloat","toFixed","cartSubTotal","cartTax","cartTotal","children","ProductConsumer","Consumer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport { storeProducts, detailProduct } from './data'\nconst ProductContext = React.createContext()\n\nclass ProductProvider extends Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      products: [],\n      detailProduct: detailProduct,\n      cart: [],\n      modalOpen: false,\n      modalProduct: detailProduct,\n      cartSubTotal: 0,\n      cartTax: 0,\n      cartTotal: 0\n    }\n  }\n\n  handleDetail = (id) => {\n    console.log('hello from detail')\n    const product = this.getItem(id)\n    this.setState(() => {\n      return { detailProduct: product }\n    })\n  }\n\n  addToCart =( id) => {\n    let tempProducts = [...this.state.products]\n    const index = tempProducts.indexOf(this.getItem(id))\n    const product = tempProducts[index]\n    product.inCart = true\n    product.count = 1\n    const price = product.price\n    product.total = price\n\n    this.setState(\n      () => {\n        return {\n          products: tempProducts,\n          cart: [...this.state.cart, product]\n        }\n      },\n      () => {\n        this.addTotals()\n      }\n    )\n  }\n\n  getItem = id => {\n    const product = this.state.products.find(item => item.id === id)\n    return product\n  }\n  setProducts = () => {\n    let tempProducts = []\n    storeProducts.forEach(item => {\n      const singleItem = { ...item }\n      tempProducts = [...tempProducts, singleItem]\n\n    })\n    this.setState(() => {\n      return { products: tempProducts }\n    })\n  }\n  componentWillMount()\n  {\n    this.setProducts();\n  }\n  closeModal = () => {\n    this.setState(() => {\n      return { modalOpen: false }\n    })\n  }\n  openModal = id => {\n    const product = this.getItem(id)\n    this.setState(() => {\n      return { modalProduct: product, modalOpen: true }\n    })\n  }\n  increment = id => {\n    let tempCart = [...this.state.cart]\n    console.log(id+'this id')\n    let selectProduct = tempCart.find(x => x.id === id)\n   // console.log(selectProduct+\"this index\")\n    const index = tempCart.indexOf(selectProduct)\n    const product = tempCart[index]\n    product.count += 1\n    product.total = product.count * product.price\n    this.setState(\n      () => {\n        return { cart: [...tempCart] }\n      },\n      () => this.addTotals()\n    )\n  }\n\n  decrement = id => {\n    let tempCart = [...this.state.cart]\n    let selectProduct = tempCart.find(x => x.id === id)\n    const index = tempCart.indexOf(selectProduct)\n    const product = tempCart[index]\n    product.count -= 1\n    if (product.count <= 0) this.removeItem(id)\n    else {\n      product.total = product.count * product.price\n    }\n    this.setState(\n      () => {\n        return { cart: [...tempCart] }\n      },\n      () => this.addTotals()\n    )\n  }\n\n  removeItem = id => {\n    let tempProducts = [...this.state.products]\n    let tempCart = [...this.state.cart]\n    tempCart = tempCart.filter(x => {\n      return x.id !== id\n    })\n    const index = tempProducts.indexOf(this.getItem(id))\n    let removedProduct = tempProducts[index]\n    removedProduct.inCart = false\n    removedProduct.count = 0\n    removedProduct.total = 0\n    this.setState(\n      () => {\n        return { products: [...tempProducts], cart: [...tempCart] }\n      },\n      () => this.addTotals()\n    )\n  }\n  clearCart = () => {\n    this.setState(\n      () => {\n        return { cart: [] }\n      },\n      () => {\n        this.setProducts()\n        this.addTotals()\n      }\n    )\n  }\n  addTotals = () => {\n    let subTotal = 0\n    this.state.cart.map(x => {\n      return (subTotal += x.total)\n    })\n    const tempTax = subTotal * 0.1\n    const tax = parseFloat(tempTax.toFixed(2))\n    const total = subTotal + tax\n    this.setState(() => {\n      return { cartSubTotal: subTotal, cartTax: tax, cartTotal: total }\n    })\n    //setProd({ ...prod, cartSubTotal: subTotal, cartTax: tax, cartTotal: total })\n  }\n  render () {\n    console.log(this.state)\n    return (\n      <ProductContext.Provider\n        value={{\n          ...this.state,\n          handleDetail: this.handleDetail,\n          addToCart: this.addToCart,\n          openModal: this.openModal,\n          closeModal: this.closeModal,\n          increment: this.increment,\n          decrement: this.decrement,\n          removeItem: this.removeItem,\n          clearCart:this.clearCart\n        }}\n      >\n        {this.props.children}\n      </ProductContext.Provider>\n    )\n  }\n}\nconst ProductConsumer = ProductContext.Consumer\nexport { ProductProvider, ProductConsumer }\n"]},"metadata":{},"sourceType":"module"}