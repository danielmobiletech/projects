{"ast":null,"code":"import _objectSpread from\"/Users/daniel/Documents/ReactStore/reactstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"/Users/daniel/Documents/ReactStore/reactstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/daniel/Documents/ReactStore/reactstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/daniel/Documents/ReactStore/reactstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/daniel/Documents/ReactStore/reactstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/daniel/Documents/ReactStore/reactstore/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{storeProducts,detailProduct}from'./data';var ProductContext=React.createContext();var ProductProvider=/*#__PURE__*/function(_Component){_inherits(ProductProvider,_Component);var _super=_createSuper(ProductProvider);function ProductProvider(props){var _this;_classCallCheck(this,ProductProvider);_this=_super.call(this,props);_this.handleDetail=function(){console.log('hello from detail');var product=_this.getItem();_this.setState(function(){return{detailProduct:product};});};_this.addToCart=function(id){var tempProducts=_toConsumableArray(_this.state.products);var index=tempProducts.indexOf(_this.getItem(id));var product=tempProducts[index];product.inCart=true;product.count=1;var price=product.price;product.total=price;_this.setState(function(){return{products:tempProducts,cart:[].concat(_toConsumableArray(_this.state.products),[product])};},function(){_this.addTotals();});};_this.getItem=function(id){var product=_this.state.products.find(function(item){return item.id===id;});return product;};_this.setProducts=function(){var tempProducts=[];storeProducts.forEach(function(item){var singleItem=_objectSpread({},item);tempProducts=[].concat(_toConsumableArray(tempProducts),[singleItem]);});_this.setState(function(){return{detailProduct:_this.state.products};});};_this.closeModal=function(){_this.setState(function(){return{modalOpen:false};});};_this.openModal=function(id){var product=_this.getItem(id);_this.setState(function(){return{modalProduct:product,modalOpen:true};});};_this.increment=function(id){var tempCart=_toConsumableArray(_this.state.cart);console.log(id+'this id');var selectProduct=tempCart.find(function(x){return x.id===id;});// console.log(selectProduct+\"this index\")\nvar index=tempCart.indexOf(selectProduct);var product=tempCart[index];product.count+=1;product.total=product.count*product.price;_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},function(){return _this.addTotals();});};_this.decrement=function(id){var tempCart=_toConsumableArray(_this.state.cart);var selectProduct=tempCart.find(function(x){return x.id===id;});var index=tempCart.indexOf(selectProduct);var product=tempCart[index];product.count-=1;if(product.count<=0)_this.removeItem(id);else{product.total=product.count*product.price;}_this.setState(function(){return{cart:_toConsumableArray(tempCart)};},function(){return _this.addTotals();});};_this.removeItem=function(id){var tempProducts=_toConsumableArray(_this.state.products);var tempCart=_toConsumableArray(_this.state.cart);tempCart=tempCart.filter(function(x){return x.id!==id;});var index=tempProducts.indexOf(_this.getItem(id));var removedProduct=tempProducts[index];removedProduct.inCart=false;removedProduct.count=0;removedProduct.total=0;_this.setState(function(){return{products:_toConsumableArray(tempProducts),cart:_toConsumableArray(tempCart)};},function(){return _this.addTotals();});};_this.clearCart=function(){_this.setState(function(){return{cart:[]};},function(){_this.setProducts();_this.addTotals();});};_this.addTotals=function(){var subTotal=0;_this.state.cart.map(function(x){return subTotal+=x.total;});var tempTax=subTotal*0.1;var tax=parseFloat(tempTax.toFixed(2));var total=subTotal+tax;_this.setState(function(){return{cartSubTotal:subTotal,cartTax:tax,cartTotal:total};});//setProd({ ...prod, cartSubTotal: subTotal, cartTax: tax, cartTotal: total })\n};_this.state={products:storeProducts,detailProduct:detailProduct,cart:[],modalOpen:false,modalProduct:detailProduct,cartSubTotal:0,cartTax:0,cartTotal:0};return _this;}_createClass(ProductProvider,[{key:\"render\",value:function render(){console.log(this.state);return/*#__PURE__*/React.createElement(ProductContext.Provider,{value:_objectSpread(_objectSpread({},this.state),{},{handleDetail:this.handleDetail,addToCart:this.addToCart,openModal:this.openModal,closeModal:this.closeModal,increment:this.increment,decrement:this.decrement,removeItem:this.removeItem})},this.props.children);}}]);return ProductProvider;}(Component);var ProductConsumer=ProductContext.Consumer;export{ProductProvider,ProductConsumer};","map":{"version":3,"sources":["/Users/daniel/Documents/ReactStore/reactstore/src/Context.js"],"names":["React","Component","storeProducts","detailProduct","ProductContext","createContext","ProductProvider","props","handleDetail","console","log","product","getItem","setState","addToCart","id","tempProducts","state","products","index","indexOf","inCart","count","price","total","cart","addTotals","find","item","setProducts","forEach","singleItem","closeModal","modalOpen","openModal","modalProduct","increment","tempCart","selectProduct","x","decrement","removeItem","filter","removedProduct","clearCart","subTotal","map","tempTax","tax","parseFloat","toFixed","cartSubTotal","cartTax","cartTotal","children","ProductConsumer","Consumer"],"mappings":"+8BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,aAAT,CAAwBC,aAAxB,KAA6C,QAA7C,CACA,GAAMC,CAAAA,cAAc,CAAGJ,KAAK,CAACK,aAAN,EAAvB,C,GAEMC,CAAAA,e,kHACJ,yBAAaC,KAAb,CAAoB,iDAClB,uBAAMA,KAAN,EADkB,MAcpBC,YAdoB,CAcL,UAAM,CACnBC,OAAO,CAACC,GAAR,CAAY,mBAAZ,EACA,GAAMC,CAAAA,OAAO,CAAG,MAAKC,OAAL,EAAhB,CACA,MAAKC,QAAL,CAAc,UAAM,CAClB,MAAO,CAAEV,aAAa,CAAEQ,OAAjB,CAAP,CACD,CAFD,EAGD,CApBmB,OAsBpBG,SAtBoB,CAsBR,SAAAC,EAAE,CAAI,CAChB,GAAIC,CAAAA,YAAY,oBAAO,MAAKC,KAAL,CAAWC,QAAlB,CAAhB,CACA,GAAMC,CAAAA,KAAK,CAAGH,YAAY,CAACI,OAAb,CAAqB,MAAKR,OAAL,CAAaG,EAAb,CAArB,CAAd,CACA,GAAMJ,CAAAA,OAAO,CAAGK,YAAY,CAACG,KAAD,CAA5B,CACAR,OAAO,CAACU,MAAR,CAAiB,IAAjB,CACAV,OAAO,CAACW,KAAR,CAAgB,CAAhB,CACA,GAAMC,CAAAA,KAAK,CAAGZ,OAAO,CAACY,KAAtB,CACAZ,OAAO,CAACa,KAAR,CAAgBD,KAAhB,CAEA,MAAKV,QAAL,CACE,UAAM,CACJ,MAAO,CACLK,QAAQ,CAAEF,YADL,CAELS,IAAI,8BAAM,MAAKR,KAAL,CAAWC,QAAjB,GAA2BP,OAA3B,EAFC,CAAP,CAID,CANH,CAOE,UAAM,CACJ,MAAKe,SAAL,GACD,CATH,EAWD,CA1CmB,OA4CpBd,OA5CoB,CA4CV,SAAAG,EAAE,CAAI,CACd,GAAMJ,CAAAA,OAAO,CAAG,MAAKM,KAAL,CAAWC,QAAX,CAAoBS,IAApB,CAAyB,SAAAC,IAAI,QAAIA,CAAAA,IAAI,CAACb,EAAL,GAAYA,EAAhB,EAA7B,CAAhB,CACA,MAAOJ,CAAAA,OAAP,CACD,CA/CmB,OAgDpBkB,WAhDoB,CAgDN,UAAM,CAClB,GAAIb,CAAAA,YAAY,CAAG,EAAnB,CACAd,aAAa,CAAC4B,OAAd,CAAsB,SAAAF,IAAI,CAAI,CAC5B,GAAMG,CAAAA,UAAU,kBAAQH,IAAR,CAAhB,CACAZ,YAAY,8BAAOA,YAAP,GAAqBe,UAArB,EAAZ,CACD,CAHD,EAIA,MAAKlB,QAAL,CAAc,UAAM,CAClB,MAAO,CAAEV,aAAa,CAAE,MAAKc,KAAL,CAAWC,QAA5B,CAAP,CACD,CAFD,EAGD,CAzDmB,OA0DpBc,UA1DoB,CA0DP,UAAM,CACjB,MAAKnB,QAAL,CAAc,UAAM,CAClB,MAAO,CAAEoB,SAAS,CAAE,KAAb,CAAP,CACD,CAFD,EAGD,CA9DmB,OA+DpBC,SA/DoB,CA+DR,SAAAnB,EAAE,CAAI,CAChB,GAAMJ,CAAAA,OAAO,CAAG,MAAKC,OAAL,CAAaG,EAAb,CAAhB,CACA,MAAKF,QAAL,CAAc,UAAM,CAClB,MAAO,CAAEsB,YAAY,CAAExB,OAAhB,CAAyBsB,SAAS,CAAE,IAApC,CAAP,CACD,CAFD,EAGD,CApEmB,OAqEpBG,SArEoB,CAqER,SAAArB,EAAE,CAAI,CAChB,GAAIsB,CAAAA,QAAQ,oBAAO,MAAKpB,KAAL,CAAWQ,IAAlB,CAAZ,CACAhB,OAAO,CAACC,GAAR,CAAYK,EAAE,CAAC,SAAf,EACA,GAAIuB,CAAAA,aAAa,CAAGD,QAAQ,CAACV,IAAT,CAAc,SAAAY,CAAC,QAAIA,CAAAA,CAAC,CAACxB,EAAF,GAASA,EAAb,EAAf,CAApB,CACD;AACC,GAAMI,CAAAA,KAAK,CAAGkB,QAAQ,CAACjB,OAAT,CAAiBkB,aAAjB,CAAd,CACA,GAAM3B,CAAAA,OAAO,CAAG0B,QAAQ,CAAClB,KAAD,CAAxB,CACAR,OAAO,CAACW,KAAR,EAAiB,CAAjB,CACAX,OAAO,CAACa,KAAR,CAAgBb,OAAO,CAACW,KAAR,CAAgBX,OAAO,CAACY,KAAxC,CACA,MAAKV,QAAL,CACE,UAAM,CACJ,MAAO,CAAEY,IAAI,oBAAMY,QAAN,CAAN,CAAP,CACD,CAHH,CAIE,iBAAM,OAAKX,SAAL,EAAN,EAJF,EAMD,CApFmB,OAsFpBc,SAtFoB,CAsFR,SAAAzB,EAAE,CAAI,CAChB,GAAIsB,CAAAA,QAAQ,oBAAO,MAAKpB,KAAL,CAAWQ,IAAlB,CAAZ,CACA,GAAIa,CAAAA,aAAa,CAAGD,QAAQ,CAACV,IAAT,CAAc,SAAAY,CAAC,QAAIA,CAAAA,CAAC,CAACxB,EAAF,GAASA,EAAb,EAAf,CAApB,CACA,GAAMI,CAAAA,KAAK,CAAGkB,QAAQ,CAACjB,OAAT,CAAiBkB,aAAjB,CAAd,CACA,GAAM3B,CAAAA,OAAO,CAAG0B,QAAQ,CAAClB,KAAD,CAAxB,CACAR,OAAO,CAACW,KAAR,EAAiB,CAAjB,CACA,GAAIX,OAAO,CAACW,KAAR,EAAiB,CAArB,CAAwB,MAAKmB,UAAL,CAAgB1B,EAAhB,EAAxB,IACK,CACHJ,OAAO,CAACa,KAAR,CAAgBb,OAAO,CAACW,KAAR,CAAgBX,OAAO,CAACY,KAAxC,CACD,CACD,MAAKV,QAAL,CACE,UAAM,CACJ,MAAO,CAAEY,IAAI,oBAAMY,QAAN,CAAN,CAAP,CACD,CAHH,CAIE,iBAAM,OAAKX,SAAL,EAAN,EAJF,EAMD,CAtGmB,OAwGpBe,UAxGoB,CAwGP,SAAA1B,EAAE,CAAI,CACjB,GAAIC,CAAAA,YAAY,oBAAO,MAAKC,KAAL,CAAWC,QAAlB,CAAhB,CACA,GAAImB,CAAAA,QAAQ,oBAAO,MAAKpB,KAAL,CAAWQ,IAAlB,CAAZ,CACAY,QAAQ,CAAGA,QAAQ,CAACK,MAAT,CAAgB,SAAAH,CAAC,CAAI,CAC9B,MAAOA,CAAAA,CAAC,CAACxB,EAAF,GAASA,EAAhB,CACD,CAFU,CAAX,CAGA,GAAMI,CAAAA,KAAK,CAAGH,YAAY,CAACI,OAAb,CAAqB,MAAKR,OAAL,CAAaG,EAAb,CAArB,CAAd,CACA,GAAI4B,CAAAA,cAAc,CAAG3B,YAAY,CAACG,KAAD,CAAjC,CACAwB,cAAc,CAACtB,MAAf,CAAwB,KAAxB,CACAsB,cAAc,CAACrB,KAAf,CAAuB,CAAvB,CACAqB,cAAc,CAACnB,KAAf,CAAuB,CAAvB,CACA,MAAKX,QAAL,CACE,UAAM,CACJ,MAAO,CAAEK,QAAQ,oBAAMF,YAAN,CAAV,CAA+BS,IAAI,oBAAMY,QAAN,CAAnC,CAAP,CACD,CAHH,CAIE,iBAAM,OAAKX,SAAL,EAAN,EAJF,EAMD,CAzHmB,OA0HpBkB,SA1HoB,CA0HR,UAAM,CAChB,MAAK/B,QAAL,CACE,UAAM,CACJ,MAAO,CAAEY,IAAI,CAAE,EAAR,CAAP,CACD,CAHH,CAIE,UAAM,CACJ,MAAKI,WAAL,GACA,MAAKH,SAAL,GACD,CAPH,EASD,CApImB,OAqIpBA,SArIoB,CAqIR,UAAM,CAChB,GAAImB,CAAAA,QAAQ,CAAG,CAAf,CACA,MAAK5B,KAAL,CAAWQ,IAAX,CAAgBqB,GAAhB,CAAoB,SAAAP,CAAC,CAAI,CACvB,MAAQM,CAAAA,QAAQ,EAAIN,CAAC,CAACf,KAAtB,CACD,CAFD,EAGA,GAAMuB,CAAAA,OAAO,CAAGF,QAAQ,CAAG,GAA3B,CACA,GAAMG,CAAAA,GAAG,CAAGC,UAAU,CAACF,OAAO,CAACG,OAAR,CAAgB,CAAhB,CAAD,CAAtB,CACA,GAAM1B,CAAAA,KAAK,CAAGqB,QAAQ,CAAGG,GAAzB,CACA,MAAKnC,QAAL,CAAc,UAAM,CAClB,MAAO,CAAEsC,YAAY,CAAEN,QAAhB,CAA0BO,OAAO,CAAEJ,GAAnC,CAAwCK,SAAS,CAAE7B,KAAnD,CAAP,CACD,CAFD,EAGA;AACD,CAjJmB,CAElB,MAAKP,KAAL,CAAa,CACXC,QAAQ,CAAEhB,aADC,CAEXC,aAAa,CAAEA,aAFJ,CAGXsB,IAAI,CAAE,EAHK,CAIXQ,SAAS,CAAE,KAJA,CAKXE,YAAY,CAAEhC,aALH,CAMXgD,YAAY,CAAE,CANH,CAOXC,OAAO,CAAE,CAPE,CAQXC,SAAS,CAAE,CARA,CAAb,CAFkB,aAYnB,C,mEAsIS,CACR5C,OAAO,CAACC,GAAR,CAAY,KAAKO,KAAjB,EACA,mBACE,oBAAC,cAAD,CAAgB,QAAhB,EACE,KAAK,gCACA,KAAKA,KADL,MAEHT,YAAY,CAAE,KAAKA,YAFhB,CAGHM,SAAS,CAAE,KAAKA,SAHb,CAIHoB,SAAS,CAAE,KAAKA,SAJb,CAKHF,UAAU,CAAE,KAAKA,UALd,CAMHI,SAAS,CAAE,KAAKA,SANb,CAOHI,SAAS,CAAE,KAAKA,SAPb,CAQHC,UAAU,CAAE,KAAKA,UARd,EADP,EAYG,KAAKlC,KAAL,CAAW+C,QAZd,CADF,CAgBD,C,6BArK2BrD,S,EAuK9B,GAAMsD,CAAAA,eAAe,CAAGnD,cAAc,CAACoD,QAAvC,CACA,OAASlD,eAAT,CAA0BiD,eAA1B","sourcesContent":["import React, { Component } from 'react'\nimport { storeProducts, detailProduct } from './data'\nconst ProductContext = React.createContext()\n\nclass ProductProvider extends Component {\n  constructor (props) {\n    super(props);\n    this.state = {\n      products: storeProducts,\n      detailProduct: detailProduct,\n      cart: [],\n      modalOpen: false,\n      modalProduct: detailProduct,\n      cartSubTotal: 0,\n      cartTax: 0,\n      cartTotal: 0\n    }\n  }\n\n  handleDetail = () => {\n    console.log('hello from detail')\n    const product = this.getItem()\n    this.setState(() => {\n      return { detailProduct: product }\n    })\n  }\n\n  addToCart = id => {\n    let tempProducts = [...this.state.products]\n    const index = tempProducts.indexOf(this.getItem(id))\n    const product = tempProducts[index]\n    product.inCart = true\n    product.count = 1\n    const price = product.price\n    product.total = price\n\n    this.setState(\n      () => {\n        return {\n          products: tempProducts,\n          cart: [...this.state.products, product]\n        }\n      },\n      () => {\n        this.addTotals()\n      }\n    )\n  }\n\n  getItem = id => {\n    const product = this.state.products.find(item => item.id === id)\n    return product\n  }\n  setProducts = () => {\n    let tempProducts = []\n    storeProducts.forEach(item => {\n      const singleItem = { ...item }\n      tempProducts = [...tempProducts, singleItem]\n    })\n    this.setState(() => {\n      return { detailProduct: this.state.products }\n    })\n  }\n  closeModal = () => {\n    this.setState(() => {\n      return { modalOpen: false }\n    })\n  }\n  openModal = id => {\n    const product = this.getItem(id)\n    this.setState(() => {\n      return { modalProduct: product, modalOpen: true }\n    })\n  }\n  increment = id => {\n    let tempCart = [...this.state.cart]\n    console.log(id+'this id')\n    let selectProduct = tempCart.find(x => x.id === id)\n   // console.log(selectProduct+\"this index\")\n    const index = tempCart.indexOf(selectProduct)\n    const product = tempCart[index]\n    product.count += 1\n    product.total = product.count * product.price\n    this.setState(\n      () => {\n        return { cart: [...tempCart] }\n      },\n      () => this.addTotals()\n    )\n  }\n\n  decrement = id => {\n    let tempCart = [...this.state.cart]\n    let selectProduct = tempCart.find(x => x.id === id)\n    const index = tempCart.indexOf(selectProduct)\n    const product = tempCart[index]\n    product.count -= 1\n    if (product.count <= 0) this.removeItem(id)\n    else {\n      product.total = product.count * product.price\n    }\n    this.setState(\n      () => {\n        return { cart: [...tempCart] }\n      },\n      () => this.addTotals()\n    )\n  }\n\n  removeItem = id => {\n    let tempProducts = [...this.state.products]\n    let tempCart = [...this.state.cart]\n    tempCart = tempCart.filter(x => {\n      return x.id !== id\n    })\n    const index = tempProducts.indexOf(this.getItem(id))\n    let removedProduct = tempProducts[index]\n    removedProduct.inCart = false\n    removedProduct.count = 0\n    removedProduct.total = 0\n    this.setState(\n      () => {\n        return { products: [...tempProducts], cart: [...tempCart] }\n      },\n      () => this.addTotals()\n    )\n  }\n  clearCart = () => {\n    this.setState(\n      () => {\n        return { cart: [] }\n      },\n      () => {\n        this.setProducts()\n        this.addTotals()\n      }\n    )\n  }\n  addTotals = () => {\n    let subTotal = 0\n    this.state.cart.map(x => {\n      return (subTotal += x.total)\n    })\n    const tempTax = subTotal * 0.1\n    const tax = parseFloat(tempTax.toFixed(2))\n    const total = subTotal + tax\n    this.setState(() => {\n      return { cartSubTotal: subTotal, cartTax: tax, cartTotal: total }\n    })\n    //setProd({ ...prod, cartSubTotal: subTotal, cartTax: tax, cartTotal: total })\n  }\n  render () {\n    console.log(this.state)\n    return (\n      <ProductContext.Provider\n        value={{\n          ...this.state,\n          handleDetail: this.handleDetail,\n          addToCart: this.addToCart,\n          openModal: this.openModal,\n          closeModal: this.closeModal,\n          increment: this.increment,\n          decrement: this.decrement,\n          removeItem: this.removeItem\n        }}\n      >\n        {this.props.children}\n      </ProductContext.Provider>\n    )\n  }\n}\nconst ProductConsumer = ProductContext.Consumer\nexport { ProductProvider, ProductConsumer }\n"]},"metadata":{},"sourceType":"module"}